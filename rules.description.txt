

(node:10012) DeprecationWarning: grpc.load: Use the @grpc/proto-loader module with grpc.loadPackageDefinition instead
  Emulated_Rules
    √ Should not allow writes to a random collection (2235ms)
    √ Shouls not allow reads from a random collection (314ms)
    Users
      Create
        √ Unautherized users should not be able to create new Users (262ms)
        √ Users should not be able to create new Users (220ms)
        √ Admin Users should not be able to create new Users (119ms)
        √ Super Admin Users should not be able to create new Users (133ms)
      Read
        √ Unautherized users should not be able to read data from users (249ms)
        √ Users should be able to read their own data (184ms)
        √ Users should not be able to read data on other users (152ms)
        √ Admin users should be able to read data on other users (133ms)
        √ Super Admin users should be able to read data on other users (138ms)
      Update
        √ Unautherized Users should not be able to update data on users (175ms)
        √ Users should not be able to update data on other users (203ms)
        √ Users should not be able to update field: id (149ms)
        √ Users should not be able to update field: claims (154ms)
        √ Users should not be able to update field: email (164ms)
        √ Users should be able to update field: name (150ms)
        √ Users should be able to update field: FCM_tokens (166ms)
        √ Users should be able to update data on the relation to a Household (150ms)
        √ Users should not be able to update their role in relation to a household (245ms)
        √ Users should not be able to update the accecpted property in relation to a household to false (137ms)
        √ Users should be able to change the accecpted property in relation to a household to true (144ms)
        √ Admin users should be able to update data on other users (124ms)
      Delete
        √ Should not allow unautherized Users to delete Users (106ms)
        √ Should not allow Users to delete Users (127ms)
    Base Stations
      Create
        √  Unautherized users should not be able to create Base Station (125ms)
        √ Users should not be able to create Base Station (115ms)
        √ Admin Users should not be able to create Base Station (103ms)
        √ Super Admin Users should not be able to create Base Station (135ms)
      Read
        √ Should not allow unautherized Users to read from Base Stations (167ms)
        √ Should not allow Users to read from Base Stations claimed by other Household than the one they are resident in (228ms)
        √ Should allow Users to read from unclaimed Base Stations (137ms)
        √ Should allow Users to read from Base Stations related to their resident Household (268ms)
        √ Admin Users should be able to read data (180ms)
        √ Super Admin Users should not be able to read data (95ms)
      Update
        √ Should not allow unautherized Users to update data (176ms)
        √ Should not allow Users to update data on non-related Base Stations (147ms)
        √ Should not allow related Users to update field: id (166ms)
        √ Should not allow related Users to update field: pin (166ms)
        √ Should not allow related Users to update field: websocket (168ms)
        √ Should not allow related Users to update field: household (166ms)
        √ Should not allow Users to update field "id" of unclaimed Base Stations (142ms)
        √ Should not allow Users to update field "pin" of unclaimed Base Stations (141ms)
        √ Should not allow Users to update field "websocket" of unclaimed Base Stations (132ms)
        √ Should not allow Users to update field "households" of unclaimed Base Stations if field is no map only containing id:string (132ms)
        √ Should allow Users to update field "households" of unclaimed Base Stations (153ms)
      Delete
        √ Should not allow unautherized Users to delete Base Stations (149ms)
        √ Should not allow Users to delete Base Stations (111ms)
    Households
      Create
        √ Should not allow unautherized Users to be able to create households (163ms)
        √ Should not allow Users to create Households without an users field (160ms)
        √ Should not allow Users to create Households without a users field including ID ref to themselves (112ms)
        √ Should not allow Users to create Households with a users field including multiple ID refs to other users (115ms)
        √ Should not allow Users to create Households without an base_stations field (114ms)
        √ Should allow Users to create Households with fields: "base_stations" and "users" including ID ref to themselves (107ms)
        √ Should allow Admin Users to create Household for other Users (107ms)
      Read
        √ Should not allow Unautherized Users to read data (103ms)
        √ Should not allow Users not resident of a Household to read data (133ms)
        √ Should allow resident Users to read data (134ms)
        √ Should allow Admin Users to read data from all Households (127ms)
      Update
        √ Should not allow unautherized Users to update data (113ms)
        √ Should not allow resident Users to update field: users (430ms)
        √ Should not allow resident Users to update field: sensors (178ms)
        √ Should not allow resident users to update field: base_stations (184ms)
        √ Should not allow Household Admins to update field: base_stations (200ms)
        √ Should allow Household Admins to update field: users (184ms)
        √ Should allow Household Admins to update field: sensors (200ms)
      Delete
        √ Unautherized users should not be able the delete households (122ms)
        √ Users should not be able the delete households (117ms)
        √ Users should not be able the delete households (137ms)
    Sensors
      Create
        √ Should not allow unautherized Users to create Sensors (135ms)
        √ Should not allow Users to create Sensors (137ms)
        √ Should not allow admin Users to create Sensors (147ms)
        √ Should not allow super admin Users to create Sensors (138ms)
      Read
        √ Unautherized users should not be able to read data from Sensors (150ms)
        √ Users should not be able to read data from non-related Sensors (151ms)
        √ Users should be able to read data from related Sensors (117ms)
        √ Admin users should be able to read data from Sensors (121ms)
      Update
        √ Unautherized users should not be able to update data on Sensors (239ms)
        √ Users should not be able to update data on non-related Sensors (124ms)
        √ Users should not be able to update field: id (124ms)
        √ Users should not be able to update field: users (153ms)
        √ Users should be able to update data on related Sensors (136ms)
        √ Admin users should be able to update data on Sensors (117ms)
      Delete
        √ Should not allow unautherized Users to delete Sensors (127ms)
        √ Should not allow Users to delete Sensors (115ms)
    Sensors_Users
      Create
        √ Should not allow unautherized Users to create Sensors-Users collections (114ms)
        √ Should not allow Users to create Sensors-Users collections (115ms)
        √ Should not allow admin Users to create Sensors-Users collections (105ms)
        √ Should not allow super admin Users to create Sensors-Users collections (116ms)
      Read
        √ Should not allow unautherized Users to read data from Sensors_Users (130ms)
        √ Should allow the User of the relation to read data from Sensors_Users (133ms)
      Update
        √ Should not allow unautherized Users to update data on Sensors_Users (114ms)
        √ Should not allow Users to update field: users (134ms)
        √ Should not allow Users to update field: sensors (152ms)
        √ Should not allow not related Users to update field: pivot (121ms)
        √ Should allow Users to update field: pivot (123ms)
      Delete
        √ Should not allow unautherized Users to delete Sensors_Users (114ms)
        √ Should not allow Users to delete Sensors_Users (105ms)


  98 passing (17s)

