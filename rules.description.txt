

(node:6068) DeprecationWarning: grpc.load: Use the @grpc/proto-loader module with grpc.loadPackageDefinition instead
  Emulated_Rules
    √ Should not allow writes to a random collection (172ms)
    √ Shouls not allow reads from a random collection (117ms)
    Users
      Create
        √ Unautherized users should not be able to create new Users (123ms)
        √ Users should not be able to create new Users (128ms)
        √ Admin Users should not be able to create new Users (131ms)
        √ Super Admin Users should not be able to create new Users (133ms)
      Read
        √ Unautherized users should not be able to read data from users (140ms)
        √ Users should be able to read their own data (138ms)
        √ Users should not be able to read data on other users (131ms)
        √ Admin users should be able to read data on other users (122ms)
        √ Super Admin users should be able to read data on other users (149ms)
      Update
        √ Unautherized Users should not be able to update data on users (118ms)
        √ Users should not be able to update data on other users (146ms)
        √ Users should not be able to update field: id (137ms)
        √ Users should not be able to update field: claims (135ms)
        √ Users should not be able to update field: email (220ms)
        √ Users should be able to update field: name (149ms)
        √ Users should be able to update field: FCM_tokens (145ms)
        √ Users should be able to update data on the relation to a Household (411ms)
        √ Users should not be able to update their role in relation to a household (129ms)
        √ Users should not be able to update the accecpted property in relation to a household to false (136ms)
        √ Users should be able to change the accecpted property in relation to a household to true (137ms)
        √ Super Admin users should be able to update data on other users (139ms)
      Delete
        √ Should not allow unautherized Users to delete Users (151ms)
        √ Should not allow Users to delete Users (134ms)
    Base Stations
      Create
        √  Unautherized users should not be able to create Base Station (133ms)
        √ Users should not be able to create Base Station (131ms)
        √ Admin Users should not be able to create Base Station (122ms)
        √ Super Admin Users should not be able to create Base Station (126ms)
      Read
        √ Should not allow unautherized Users to read from Base Stations (121ms)
        √ Should not allow Users to read from Base Stations claimed by other Household than the one they are resident in (177ms)
        √ Should allow Users to read from unclaimed Base Stations (138ms)
        √ Should allow Users to read from Base Stations related to their resident Household (180ms)
        √ Admin Users should be able to read data (92ms)
        √ Super Admin Users should not be able to read data (115ms)
      Update
        √ Should not allow unautherized Users to update data (115ms)
        √ Should not allow Users to update data on non-related Base Stations (264ms)
        √ Should not allow related Users to update field: id (168ms)
        √ Should not allow related Users to update field: pin (166ms)
        √ Should not allow related Users to update field: websocket (187ms)
        √ Should not allow related Users to update field: household (178ms)
        √ Should not allow Users to update field "id" of unclaimed Base Stations (152ms)
        √ Should not allow Users to update field "pin" of unclaimed Base Stations (137ms)
        √ Should not allow Users to update field "websocket" of unclaimed Base Stations (149ms)
        √ Should not allow Users to update field "households" of unclaimed Base Stations if field is no map only containing id:string (147ms)
        √ Should allow Users to update field "households" of unclaimed Base Stations (152ms)
      Delete
        √ Should not allow unautherized Users to delete Base Stations (118ms)
        √ Should not allow Users to delete Base Stations (117ms)
    Households
      Create
        √ Should not allow unautherized Users to be able to create households (133ms)
        √ Should not allow Users to create Households without an users field (134ms)
        √ Should not allow Users to create Households without a users field including ID ref to themselves (133ms)
        √ Should not allow Users to create Households with a users field including multiple ID refs to other users (148ms)
        √ Should not allow Users to create Households without an base_stations field (120ms)
        √ Should allow Users to create Households with fields: "base_stations" and "users" including ID ref to themselves (136ms)
        √ Should allow Admin Users to create Household for other Users (116ms)
      Read
        √ Should not allow Unautherized Users to read data (99ms)
        √ Should not allow Users not resident of a Household to read data (130ms)
        √ Should allow resident Users to read data (134ms)
        √ Should allow Admin Users to read data from all Households (120ms)
      Update
        √ Should not allow unautherized Users to update data (126ms)
        √ Should not allow resident Users to update field: users (259ms)
        √ Should not allow resident Users to update field: sensors (195ms)
        √ Should not allow resident users to update field: base_stations (164ms)
        √ Should not allow Household Admins to update field: base_stations (228ms)
        √ Should allow Household Admins to update field: users (202ms)
        √ Should allow Household Admins to update field: sensors (202ms)
      Delete
        √ Unautherized users should not be able the delete households (139ms)
        √ Users should not be able the delete households (106ms)
        √ Users should not be able the delete households (125ms)
    Sensors
      Create
        √ Should not allow unautherized Users to create Sensors (131ms)
        √ Should not allow Users to create Sensors (122ms)
        √ Should not allow admin Users to create Sensors (145ms)
        √ Should not allow super admin Users to create Sensors (119ms)
      Read
        √ Unautherized users should not be able to read data from Sensors (164ms)
        √ Users should not be able to read data from non-related Sensors (170ms)
        √ Users should be able to read data from related Sensors (116ms)
        √ Admin users should be able to read data from Sensors (162ms)
      Update
        √ Unautherized users should not be able to update data on Sensors (122ms)
        √ Users should not be able to update data on non-related Sensors (148ms)
        √ Users should not be able to update field: id (134ms)
        √ Users should not be able to update field: users (133ms)
        √ Users should be able to update data on related Sensors (169ms)
        √ Admin users should be able to update data on Sensors (146ms)
      Delete
        √ Should not allow unautherized Users to delete Sensors (122ms)
        √ Should not allow Users to delete Sensors (141ms)
    Sensors_Users
      Create
        √ Should not allow unautherized Users to create Sensors-Users collections (122ms)
        √ Should not allow Users to create Sensors-Users collections (124ms)
        √ Should not allow admin Users to create Sensors-Users collections (112ms)
        √ Should not allow super admin Users to create Sensors-Users collections (134ms)
      Read
        √ Should not allow unautherized Users to read data from Sensors_Users (143ms)
        √ Should allow the User of the relation to read data from Sensors_Users (262ms)
      Update
        √ Should not allow unautherized Users to update data on Sensors_Users (155ms)
        √ Should not allow Users to update field: users (130ms)
        √ Should not allow Users to update field: sensors (123ms)
        √ Should not allow not related Users to update field: pivot (161ms)
        √ Should allow Users to update field: pivot (129ms)
      Delete
        √ Should not allow unautherized Users to delete Sensors_Users (156ms)
        √ Should not allow Users to delete Sensors_Users (126ms)


  98 passing (15s)

